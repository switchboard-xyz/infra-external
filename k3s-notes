https://intel.github.io/intel-device-plugins-for-kubernetes/cmd/sgx_plugin/README.html#pre-built-images

sudo apt update && sudo apt full-upgrade
or sudo apt dist-upgrade

i think just update/sudo apt install linux-image-generic-hwe-22.04



  sgx-aesm-service
  libsgx-aesm-launch-plugin
  libsgx-aesm-quote-ex-plugin
  libsgx-aesm-ecdsa-plugin
  libsgx-dcap-quote-verify
   libsgx-dcap-default-qpl
   
echo "deb https://download.01.org/intel-sgx/sgx_repo/ubuntu $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/intel-sgx.list >/dev/null
curl -sSL "https://download.01.org/intel-sgx/sgx_repo/ubuntu/intel-sgx-deb.key" | sudo -E apt-key add -
sudo apt update
sudo apt install sgx-aesm-service libsgx-aesm-launch-plugin libsgx-aesm-quote-ex-plugin libsgx-aesm-ecdsa-plugin libsgx-aesm-epid-plugin libsgx-dcap-quote-verify
   
   
k3sup install --ip $MY_MACHINE_IP --user root --context k3s-devnet
^^later on user cluster flag? or use kine somehow...

k3sup install --ip SERVER_IP --user USER --k3s-version K3S_VERSION --k3s-extra-args '--datastore-endpoint postgres://username:password@hostname:port/database'


~/workspace/switchboard/helmwave-internal/k3s-cluster$ export KUBECONFIG=`pwd`/kubeconfig

helm install \
  cert-manager jetstack/cert-manager \
  --namespace cert-manager \
  --create-namespace \
  --version v1.9.1 \
  --set installCRDs=true \
  --set global.leaderElection.namespace=cert-manager
  
https://github.com/intel/intel-device-plugins-for-kubernetes/tags
^^for release versions (ex: v0.28.0)

#node discover
kubectl apply -k 'https://github.com/intel/intel-device-plugins-for-kubernetes/deployments/nfd/?ref=v0.28.0'
kubectl apply -k 'https://github.com/intel/intel-device-plugins-for-kubernetes/deployments/nfd/overlays/node-feature-rules?ref=v0.28.0'

#device plugin operator
kubectl apply -k 'https://github.com/intel/intel-device-plugins-for-kubernetes/deployments/operator/default?ref=v0.28.0'

#sgx device plugin
kubectl apply -f 'https://raw.githubusercontent.com/intel/intel-device-plugins-for-kubernetes/v0.28.0/deployments/operator/samples/deviceplugin_v1_sgxdeviceplugin.yaml'
